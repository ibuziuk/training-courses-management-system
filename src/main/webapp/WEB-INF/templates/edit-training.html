<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
      xmlns="http://www.w3.org/1999/xhtml" ng-app="editTrainingApp">
<head>
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>

	<base th:href="@{/}"/>

	<link rel="shortcut icon" href="../../resources/vendors/pics/favicon.gif"
	      th:href="@{/resources/vendors/pics/favicon.gif}"/>

	<title>Edit the training</title>

	<!-- Bootstrap Core CSS -->
	<link href="../../resources/vendors/css/bootstrap.css" th:href="@{/resources/vendors/css/bootstrap.css}"
	      rel="stylesheet"/>

	<!-- Custom CSS -->
	<link href="../../resources/css/global.css" th:href="@{/resources/css/global.css}" rel="stylesheet"/>

	<!-- Custom Fonts -->
	<link href="../../resources/vendors/font-awesome/css/font-awesome.min.css"
	      th:href="@{/resources/vendors/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css"/>

	<!-- ngNotify CSS -->
	<link href="../../resources/vendors/css/ng-notify.min.css" th:href="@{/resources/vendors/css/ng-notify.min.css}"
	      rel="stylesheet"/>

	<!-- ui-select-2 -->
	<link href="../../resources/vendors/css/select2.min.css" th:href="@{/resources/vendors/css/select2.min.css}"
	      rel="stylesheet"/>

	<!-- jQuery -->
	<script src="../../resources/vendors/js/jquery-2.1.4.min.js"
	        th:src="@{/resources/vendors/js/jquery-2.1.4.min.js}"></script>

	<!-- Angular -->
	<script src="../../resources/vendors/js/angular.min.js" th:src="@{/resources/vendors/js/angular.min.js}"></script>
	<script src="../../resources/vendors/js/ui-bootstrap-tpls-0.12.1.js"
	        th:src="@{/resources/vendors/js/ui-bootstrap-tpls-0.12.1.js}"></script>

	<!-- ngNotify -->
	<script src="../../resources/vendors/js/ng-notify.min.js"
	        th:src="@{/resources/vendors/js/ng-notify.min.js}"></script>

	<!-- ui-select-2 -->
	<script src="../../resources/vendors/js/select2.min.js" th:src="@{/resources/vendors/js/select2.min.js}"></script>
	<script src="../../resources/vendors/js/ui-select2.js" th:src="@{/resources/vendors/js/ui-select2.js}"></script>

	<!-- Angular controllers -->
	<script src="../../resources/js/edit-training-app/app.js"
	        th:src="@{/resources/js/edit-training-app/app.js}"></script>
	<script src="../../resources/js/global-ctrls/collapse-ctrl.js"
	        th:src="@{/resources/js/global-ctrls/collapse-ctrl.js}"></script>
	<script src="../../resources/js/global-ctrls/language-ctrl.js"
	        th:src="@{/resources/js/global-ctrls/language-ctrl.js}"></script>
	<script src="../../resources/js/edit-training-app/pagination-ctrl.js"
	        th:src="@{/resources/js/edit-training-app/pagination-ctrl.js}"></script>
	<script src="../../resources/js/edit-training-app/page-ctrl.js"
	        th:src="@{/resources/js/edit-training-app/page-ctrl.js}"></script>
</head>

<body>
<div id="wrapper">
	<!-- Navigation -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" id="top-menu" ng-controller="collapseCtrl">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" id="menu-button" ng-click="isCollapsed = !isCollapsed">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>

			<a class="navbar-brand" href="welcome.html" th:href="@{/welcome}">
				<img alt="Brand" src="../../resources/vendors/pics/exadel-logo.png"
				     th:src="@{/resources/vendors/pics/exadel-logo.png}"/>
			</a>
		</div>

		<!-- Top Menu Items -->
		<ul class="nav navbar-right top-nav">
			<li class="active">
				<a href="welcome.html" th:href="@{/welcome}">
					<i class="fa fa-fw fa-user"></i>
					<span sec:authentication="principal.firstName"></span>
				</a>
			</li>

			<li>
				<ul class="nav navbar-right top-nav language-panel" ng-controller="languageCtrl">
					<li><a class="lang" href="" ng-click="languageSwitcher('en')">En</a></li>
					<li><a class="lang" href="" ng-click="languageSwitcher('ru')">Ru</a></li>
				</ul>
			</li>

			<li class="active">
				<a href="" th:href="@{/logout}" id="logout">
					<i class="fa fa-fw fa-power-off"></i>
					<span th:text="#{label.logout}">Log out</span>
				</a>
			</li>
		</ul>

		<!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
		<div class="collapse navbar-collapse" collapse="isCollapsed">
			<ul class="nav navbar-nav side-nav" id="left-menu">

				<li id="newtraining">
					<a href="new-training.html" th:href="@{/training/new}">
						<i class="fa fa-fw fa-circle-o"></i>
						<span th:text="#{label.newTraining}">Create new training</span>
					</a>
				</li>

				<li sec:authorize="hasAnyRole('ROLE_USER', 'ROLE_ADMIN')" id="alltrainings">
					<a href="all-trainings.html" th:href="@{/training/all}">
						<i class="fa fa-fw fa-circle-o"></i>
						<span th:text="#{label.allTrainings}">All trainings</span>
					</a>
				</li>

				<li id="mytrainings">
					<a href="my-trainings.html" th:href="@{/training/my}">
						<i class="fa fa-fw fa-circle-o"></i>
						<span th:text="#{label.myTrainings}">My trainings</span>
					</a>
				</li>

				<li sec:authorize="hasRole('ROLE_ADMIN')" id="newtrainer">
					<a href="new-trainer.html" th:href="@{/user/external/new}">
						<i class="fa fa-fw fa-circle-o"></i>
						<span th:text="#{label.newTainer}">Add new external trainer</span>
					</a>
				</li>

				<li sec:authorize="hasRole('ROLE_ADMIN')" id="users">
					<a href="users.html" th:href="@{/user/all}">
						<i class="fa fa-fw fa-circle-o"></i>
						<span th:text="#{label.users}">Users</span>
					</a>
				</li>

				<li id="copyright">
					<footer>
						<span th:text="#{label.copyright}">Â©Exadel, Inc. All Rights Reserved.</span>
					</footer>
				</li>
			</ul>
		</div>
	</nav>
	<div id="page-wrapper" ng-controller="paginationCtrl">
		<div class="container-fluid">
			<!-- Page Heading -->
			<div ng-controller="pageCtrl">
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<h1 class="page-header">
							<span><!-- TODO--> Training edition</span>
						</h1>
					</div>
				</div>
				<!-- /.row -->
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<progressbar animate="false" value="dynamic" type="success"><b>Step #{{currentPage}} of 3</b>
						</progressbar>
						<pager total-items="totalItems" ng-model="currentPage"
						       ng-click="showDynamic(currentPage)"></pager>
					</div>
				</div>
				<!-- /.row -->

				<div class="row">
					<div class="col-lg-offset-2 col-lg-8 col-md-offset-2 col-md-8 col-sm-offset-2 col-sm-8 col-xs-offset-2 col-xs-8">
						<div id="step1" ng-show="(currentPage == 1)">
							<div class="form-group">
								<label>
									Name of training *
								</label>
								<input style="width: 400px;" class="form-control" placeholder="Type here"
								       required="required"
								       ng-model="trainingName" ng-change="step1();"/>
							</div>

							<br/>

							<div>
								<label>Maximum number of guests*</label>
								<input style="width: 400px;" type="number" class="form-control" min="1"
								       placeholder="Type here" ng-model="guests" ng-change="step1();"/>
							</div>
						</div>

						<div id="step2" ng-show="(currentPage == 2)">
							<div>
								<label>Language of your training *</label>
								<br/>

								<div class="btn-group" dropdown="" dropdown-append-to-body="">
									<button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle="">
										{{toShowLanguage}}<span class="caret"></span>
									</button>
									<ul class="dropdown-menu" role="menu">
										<li><a href="" ng-click="chooseLanguage(0); step1();">English </a></li>
										<li><a href="" ng-click="chooseLanguage(1); step1();">Russian </a></li>
									</ul>
								</div>
							</div>
							<br/>

							<div ng-repeat="description in descriptions track by $index">
								<div class="form-group">
									<label>Training description #{{$index + 1}}*</label>

									<p>Some sentences about your training</p>
									<textarea style="width: 400px;" class="form-control" rows="5"
									          placeholder="Key concepts"
									          ng-model="description.text" ng-change="step1();"></textarea>
								</div>
							</div>
						</div>

						<div id="step3" ng-show="(currentPage == 3)">
							<div>
								<label>Training duration *</label>
								<timepicker ng-model="duration" hour-step="hstep"
								            minute-step="mstep"
								            show-meridian="ismeridian"></timepicker>
							</div>
							<div>
								<div style="display:inline-block; min-height:290px;">
									<div ng-show="toShowRepet == 'Weekly '">
										<div class="row">
											<div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
												<label>Choose day of start *</label>
												<datepicker ng-model="dateStartWeekly" min-date="minDate"
												            show-weeks="true"
												            class="well well-sm" custom-class="getDayClass(date, mode)"
												            starting-day="1"></datepicker>

											</div>
											<div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
												<label>Choose day of end *</label>
												<datepicker ng-model="dateEndWeekly" min-date="minDate"
												            show-weeks="true"
												            class="well well-sm" custom-class="getDayClass(date, mode)"
												            starting-day="1"></datepicker>
											</div>
										</div>
										<hr/>
									</div>
									<div ng-class="{'col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 col-xs-6 col-xs-offset-3': toShowRepet == 'Weekly '}"
									     ng-repeat="datepicker in datepickers">
										<div class="row">
											<div ng-class="{'col-lg-8 col-md-8 col-sm-8 col-xs-8': toShowRepet == 'Continuous ' || toShowRepet == 'One-off '}">
												<div ng-show="toShowRepet == 'One-off ' || toShowRepet == 'Continuous '">
													<label>Choose day for training #{{$index+1}}*</label>
													<br/>
													<datepicker ng-model="datepicker.dt" min-date="minDate"
													            show-weeks="true"
													            class="well well-sm"
													            custom-class="getDayClass(date, mode)"
													            starting-day="1"></datepicker>
												</div>
											</div>

											<div ng-class="{'col-lg-4 col-md-4 col-sm-4 col-xs-4': toShowRepet == 'Continuous ' || toShowRepet == 'One-off '}">
												<div>
													<div class="btn-group" dropdown="" dropdown-append-to-body=""
													     ng-show="toShowRepet == 'Weekly '">
														<label>Choose day of week for training #{{$index+1}}*</label>
														<br/>

														<button style="margin-left:45px" type="button"
														        class="btn btn-primary dropdown-toggle"
														        dropdown-toggle="">
															{{datepicker.toShowWeekDay}}<span class="caret"></span>
														</button>
														<ul class="dropdown-menu" role="menu">
															<li><a href=""
															       ng-click="chooseWeekDay(0, $index);">Monday </a>
															</li>
															<li><a href=""
															       ng-click="chooseWeekDay(1, $index);">Tuesday </a>
															</li>
															<li><a href=""
															       ng-click="chooseWeekDay(2, $index);">Wednesday </a>
															</li>
															<li><a href=""
															       ng-click="chooseWeekDay(3, $index);">Thursday </a>
															</li>
															<li><a href=""
															       ng-click="chooseWeekDay(4, $index);">Friday </a>
															</li>
															<li><a href=""
															       ng-click="chooseWeekDay(5, $index);">Saturday </a>
															</li>
															<li><a href=""
															       ng-click="chooseWeekDay(6, $index);">Sunday </a>
															</li>
														</ul>
													</div>
												</div>
												<br/>

												<div>
													<label>Choose time for training #{{$index+1}}*</label>
													<br/>
													<timepicker ng-model="datepicker.time"
													            hour-step="hstep" minute-step="mstep"
													            show-meridian="ismeridian">
													</timepicker>
												</div>

												<div sec:authorize="hasRole('ROLE_ADMIN')">
													<div>
														<label>Training place #{{$index+1}} *</label>
													</div>
													<input type="text" class="form-control" placeholder="Type here"
													       ng-model="datepicker.room"/>
												</div>
												<hr/>
												<br/>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div>
								<a href="">
									<button class="btn btn-primary" type="button" id="subBtn"
									        ng-click="trainingCreation()">
										Submit
									</button>
								</a>
							</div>
						</div>
					</div>
				</div>
				<!-- /.row -->
			</div>
			<!-- /.container-fluid -->
		</div>
	</div>
	<!-- /#page-wrapper -->
</div>
<!-- /#wrapper -->
</body>
</html>